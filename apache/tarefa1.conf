<VirtualHost exemplo.lan:80>
    ServerName exemplo.lan
    ServerAlias test.lan

    DocumentRoot /opt/web/exemplo.lan/htdocs

    # Mover el DirectoryIndex por defecto a todo el virtual host
    DirectoryIndex inicio.html indice.html primeiro.html

    <Directory /opt/web/exemplo.lan/htdocs>
        Require all granted

        # FollowSymLinks: Seguir cualquier enlace simbólico
        # SymLinksIfOwnerMatch: Solo seguir el symlink si el propietario del enlace
        # es el muismo que el del fichero al que apunta
        Options Includes Indexes SymLinksIfOwnerMatch
    </Directory>

    <Directory /opt/web/exemplo.lan/htdocs/33>
        DirectoryIndex indice.html inicio.html primeiro.html
        Options -FollowSymLinks -SymLinksIfOwnerMatch +Indexes
    </Directory>

    # Alia de /opt/web/exemplo.lan/datos a /opt/web/exemplo.lan/htdocs/datos
    # Si se pone una barra "/" al final del nombre del alias, también lo debe
    # de tener el directorio al que este apunta
    # Ej: Alias "/datos/" "/opt/web/exemplo.lan/datos/"
    Alias "/datos" "/opt/web/exemplo.lan/datos"
    <Directory /opt/web/exemplo.lan/datos>
        Require all granted
    </Directory>

    # Estas 2 directivas solo están aquí con fines de documentación, son innecesarios.
    # Ya están configuradas en el fichero "/etc/apache2/apache2.conf".
    
    # Por cada petición que reciba apache2, este buscará
    # por el fichero especificado, y aplicará su configuración:
    # AccessFileName .htaccess

    # Denegar el todas las peitciones que intenten acceder a un fichero
    # que empiece por ".ht":
    #<Files ~ "^\.ht">
    #    Require all denied
    #</Files>

    # Permitir que las directivas dentro del fichero .htaccess,
    # puedan sobreescribir el valor de directivas ya existentes
    <Directory "/opt/web/exemplo.lan/htdocs/50">
        # Especificar "grupos" o tipos de directivas
        # Con Nonfatal se evita que el servidor devuelva un 500 Internal Server Error
        # Nonfatal=Override: Para directivas no está permitida
        # Nonfatal=Unknown: Para directivas que no existan
        # Nonfatal=All: Para cualquier caso en que se devuelva un nonfatal
        AllowOverride Indexes Nonfatal=Override

        # Indicar especificamente que directivas se sobreescriben
        # AllowOverrideList
    </Directory>

    <Directory "/opt/web/exemplo.lan/htdocs/50/abc">
        # Manera 1:
        # AllowOverride Indexes Nonfatal=Override
        
        # Manera 2:
        AllowOverride Nonfatal=Override
        AllowOverrideList DirectoryIndex
    </Directory>

    <Directory "/opt/web/exemplo.lan/htdocs/50/segredo">
        # Manera 1:
        # AllowOverride AuthConfig Nonfatal=Override
        
        # Manera 2
        AllowOverride Nonfatal=Override
        AllowOverrideList Require
    </Directory>

    <Directory "/opt/web/exemplo.lan/htdocs/50/imaxes">
        # Manera 1:
        AllowOverride Options=Indexes Nonfatal=Override

        # Manera 2: Si se usa AllowOverrideList, solo se puede indicar la directiva
        # options entera, no valores concretos. Si que se puede hacer eso con
        # AllowOverride Nonfatal=Override
        # AllowOverrideList Options
    </Directory>
</VirtualHost>
